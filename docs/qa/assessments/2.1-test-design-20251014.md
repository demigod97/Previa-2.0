# Test Design: Story 2.1

Date: 2025-10-14
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 12
- Unit tests: 5 (42%)
- Integration tests: 4 (33%)
- E2E tests: 3 (25%)
- Priority distribution: P0: 4, P1: 6, P2: 2

## Test Scenarios by Acceptance Criteria

### AC1: Welcome Screen Display

| ID           | Level | Priority | Test | Justification |
| ------------ | ----- | -------- | ---- | ------------- |
| 2.1-UNIT-001 | Unit  | P2       | Render Welcome with logo, headline, benefits, CTA | Pure UI render/props validation
| 2.1-UNIT-002 | Unit  | P2       | Legal links present and accessible | Static content/accessibility

### AC2: Authentication Flow

| ID           | Level       | Priority | Test | Justification |
| ------------ | ----------- | -------- | ---- | ------------- |
| 2.1-UNIT-003 | Unit        | P1       | zod schema: email format invalid shows error | Validation logic
| 2.1-UNIT-004 | Unit        | P1       | zod schema: password min length enforced | Validation logic
| 2.1-INT-001  | Integration | P0       | Sign-up success calls Supabase and navigates | Cross-component/API flow
| 2.1-INT-002  | Integration | P1       | Login success authenticates user | Cross-component/API flow
| 2.1-E2E-001  | E2E         | P0       | Complete sign-up: form → submit → redirected | Critical user journey
| 2.1-E2E-002  | E2E         | P1       | Complete login: form → submit → dashboard access | Core journey

### AC3: Supabase Auth Integration

| ID           | Level       | Priority | Test | Justification |
| ------------ | ----------- | -------- | ---- | ------------- |
| 2.1-INT-003  | Integration | P0       | Session persisted after refresh via onAuthStateChange | Reliability of auth/session
| 2.1-UNIT-005 | Unit        | P1       | Logout clears session state | Local state management

### AC4: Responsive Design

| ID           | Level | Priority | Test | Justification |
| ------------ | ----- | -------- | ---- | ------------- |
| 2.1-E2E-003  | E2E   | P1       | Responsive checks for Welcome/Auth at 320/768/1024 | Visual/responsive regression

### AC5: Gamification Hook

| ID           | Level       | Priority | Test | Justification |
| ------------ | ----------- | -------- | ---- | ------------- |
| 2.1-INT-004  | Integration | P1       | On sign-up, gamification profile/badge/points inserted; failures non-blocking | Service/API integration behavior

## Risk Coverage

- Security/Privacy: Error messages should not enumerate users (covered in auth flow tests indirectly). Consider an additional negative test if backend behavior observable.
- Performance: Not covered by functional tests; add Web Vitals capture separately.

## Recommended Execution Order

1. P0 Unit/Integration/E2E: 2.1-INT-001, 2.1-E2E-001, 2.1-INT-003, 2.1-E2E-002 (if marked P0, else P1)
2. Remaining P1 Unit/Integration
3. P2 Unit
