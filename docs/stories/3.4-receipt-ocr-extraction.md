# Story 3.4: Receipt OCR Extraction & Library

## Status: ✅ Complete (2025-10-27)

**Implementation Complete**: Full Receipt OCR system with extraction, library, and AI matching
**Files Created**: 24 files (~10,400 lines of code)
**See**: docs/RECEIPT-OCR-IMPLEMENTATION-COMPLETE.md for full summary

**Key Deliverables**:
- ✅ Receipt extraction with OpenAI GPT-4o-mini (OCR confidence scoring)
- ✅ AI transaction matching algorithm (match-receipt-transactions Edge Function)
- ✅ Receipt details page at /receipts/:receiptId (view OCR data, AI matches)
- ✅ Receipt library at /receipts (grid/list view, filters, search, sort)
- ✅ Category inference from 80+ Australian merchant patterns
- ✅ ReceiptService with 11 API methods
- ✅ Mock data for testing (8 Australian merchants)

**Post-Implementation Fixes** (2025-10-28):
- ✅ Added Receipts to Sidebar navigation
- ✅ Fixed database schema (uploaded_at → created_at)
- ✅ Created USER-FLOW-RECONCILIATION.md guide

**Note**: This story was merged with Story 3.3 (Status Tracking) for implementation.

## Story

As a **Previa user who uploads receipts**,  
I want **AI to extract merchant, date, amount, and line items from my receipts**,  
So that **I can quickly reconcile expenses without manual data entry**.

## Acceptance Criteria

**AC1: Receipt-Specific Extraction Logic**
- Parse ReceiptExtraction interface from n8n callback
- Extract fields: merchant name, receipt date, total amount, tax amount, line items
- Each line item includes: description, quantity, unit price, subtotal
- Store extracted data in `receipts` table `ocr_data` JSONB field
- Calculate and store confidence score for extraction quality

**AC2: Confidence Score Indicators**
- Display confidence score for each field with visual indicators:
  - **High (≥0.90)**: Green checkmark icon
  - **Medium (0.70-0.89)**: Yellow warning icon
  - **Low (<0.70)**: Red alert icon
- Show overall receipt confidence score prominently
- Fields with low confidence highlighted for user review

**AC3: Receipt Preview with Extracted Data**
- Receipt details page at `/receipts/{id}` route
- Display receipt image thumbnail (if JPG/PNG) or PDF icon
- Show extracted data with confidence indicators
- Allow inline editing of incorrect fields
- Validation: date format DD/MM/YYYY, amount positive decimal, tax ≤ total

**AC4: Receipt Library View**
- Dedicated page at `/receipts` route
- Grid view (default) and list view toggle
- Display receipt thumbnail, merchant name, date, amount
- Filter by: date range, merchant, amount range, reconciliation status
- Search by merchant name or line item description
- Sort by: date (newest/oldest), amount (high/low), merchant alphabetically

**AC5: Categorization Hints from Merchant**
- Infer expense category from merchant name
- Mapping examples:
  - "Woolworths", "Coles" → Groceries
  - "BP", "Shell", "Caltex" → Fuel
  - "Bunnings" → Supplies
  - "Telstra", "Optus" → Telecommunications
- Display suggested category with "Apply" button
- Allow user to override suggestion

**AC6: Receipt Status Management**
- Status field: 'unreconciled' | 'reconciled' | 'ignored'
- Color-coded status badges
- Bulk status update (select multiple receipts)
- Filter library by status

## Tasks / Subtasks

- [ ] **Task 1: Parse Receipt Extraction Data** (AC: 1)
  - [ ] 1.1: Define ReceiptExtraction interface in TypeScript
  - [ ] 1.2: Parse n8n callback data into ReceiptExtraction structure
  - [ ] 1.3: Extract merchant, date, total, tax, line_items, confidence scores
  - [ ] 1.4: Store in receipts.ocr_data JSONB field
  - [ ] 1.5: Update receipts.merchant, receipt_date, amount, tax, confidence_score

- [ ] **Task 2: Receipt Details Page** (AC: 2, 3)
  - [ ] 2.1: Create `src/pages/ReceiptDetails.tsx`
  - [ ] 2.2: Fetch receipt by ID from database
  - [ ] 2.3: Display receipt image (generate signed URL from Storage)
  - [ ] 2.4: Show extracted fields with confidence indicators
  - [ ] 2.5: Implement inline editing for all fields
  - [ ] 2.6: Validate edits (date format, positive amounts)
  - [ ] 2.7: Save changes to database

- [ ] **Task 3: Confidence Indicators Component** (AC: 2)
  - [ ] 3.1: Create `src/components/ConfidenceIndicator.tsx`
  - [ ] 3.2: Accept confidence score (0.0-1.0) as prop
  - [ ] 3.3: Display green CheckCircle if ≥0.90
  - [ ] 3.4: Display yellow AlertTriangle if 0.70-0.89
  - [ ] 3.5: Display red XCircle if <0.70
  - [ ] 3.6: Show tooltip with exact confidence percentage

- [ ] **Task 4: Receipt Library View** (AC: 4)
  - [ ] 4.1: Create `src/pages/Receipts.tsx`
  - [ ] 4.2: Fetch all receipts for current user
  - [ ] 4.3: Implement grid view (3-4 columns, receipt cards)
  - [ ] 4.4: Implement list view (table-like rows)
  - [ ] 4.5: Add view toggle button (grid/list)
  - [ ] 4.6: Display receipt thumbnail or PDF icon
  - [ ] 4.7: Show merchant, date, amount on each card

- [ ] **Task 5: Filtering & Search** (AC: 4)
  - [ ] 5.1: Add date range picker filter
  - [ ] 5.2: Add merchant multi-select filter
  - [ ] 5.3: Add amount range slider filter
  - [ ] 5.4: Add status filter (unreconciled/reconciled/ignored)
  - [ ] 5.5: Add search input for merchant name
  - [ ] 5.6: Implement client-side filtering logic
  - [ ] 5.7: Add "Clear Filters" button

- [ ] **Task 6: Sorting** (AC: 4)
  - [ ] 6.1: Add sort dropdown menu
  - [ ] 6.2: Sort by date (newest first / oldest first)
  - [ ] 6.3: Sort by amount (highest / lowest)
  - [ ] 6.4: Sort by merchant (A-Z / Z-A)
  - [ ] 6.5: Default sort: newest first

- [ ] **Task 7: Category Inference** (AC: 5)
  - [ ] 7.1: Create `src/utils/categoryInference.ts`
  - [ ] 7.2: Define merchant-to-category mapping
  - [ ] 7.3: Implement fuzzy matching (contains check, case-insensitive)
  - [ ] 7.4: Display suggested category badge on receipt details
  - [ ] 7.5: "Apply Category" button updates database
  - [ ] 7.6: Allow manual category override

- [ ] **Task 8: Receipt Status Management** (AC: 6)
  - [ ] 8.1: Add status field to receipts table
  - [ ] 8.2: Create status badge component (reuse or extend StatusBadge)
  - [ ] 8.3: Add status filter to library view
  - [ ] 8.4: Implement bulk selection (checkboxes)
  - [ ] 8.5: "Mark as Reconciled" bulk action
  - [ ] 8.6: "Ignore" bulk action

- [ ] **Task 9: Testing** (AC: 1, 2, 3, 4, 5, 6)
  - [ ] 9.1: Unit test ReceiptExtraction parsing
  - [ ] 9.2: Unit test confidence indicator thresholds
  - [ ] 9.3: Unit test category inference logic
  - [ ] 9.4: Unit test filtering and sorting
  - [ ] 9.5: Integration test receipt details fetch and display
  - [ ] 9.6: Integration test bulk status update
  - [ ] 9.7: E2E test: upload receipt → view details → edit field → save

## Dev Notes

### Previous Story Insights

**From Story 3.1 (Universal Upload Hub):**
- Receipts uploaded to `receipts` bucket
- File types: PDF, JPG, PNG

**From Story 3.2 (Edge Function for Processing):**
- n8n callback updates receipts table with extraction data
- Extraction stored in ocr_data JSONB field

**From Story 3.3 (Processing Status):**
- View details navigation for completed receipts
- Processing status display pattern

**From Specification: ocr-test-data-schema.md:**
- ReceiptExtraction interface definition
- Confidence thresholds: high ≥0.90, medium 0.70-0.89, low <0.70
- Test cases for Woolworths, BP merchants

### Architecture Context

**OCR Data Structure (from docs/specifications/ocr-test-data-schema.md):**
- ReceiptExtraction interface with merchant, transaction, line_items, payment, tax fields
- Each field has confidence_score
- Overall extraction confidence calculated as average

**Receipt Storage (from architecture/backend-architecture.md):**
- Supabase Storage `receipts` bucket
- Signed URLs for image display
- Thumbnail generation (optional enhancement)

**Frontend Structure (from architecture/unified-project-structure.md):**
- Pages: `src/pages/Receipts.tsx`, `src/pages/ReceiptDetails.tsx`
- Components: `src/components/ConfidenceIndicator.tsx`
- Utils: `src/utils/categoryInference.ts`

### Data Models

**ReceiptExtraction Interface:**

```typescript
interface ReceiptExtraction {
  merchant: {
    name: string;
    address?: string;
    phone?: string;
    abn?: string;
    confidence_score: number;
  };
  transaction: {
    date: string;              // ISO format, converted to DD/MM/YYYY for display
    time?: string;
    receipt_number?: string;
    confidence_score: number;
  };
  line_items: Array<{
    description: string;
    quantity: number;
    unit_price: number;
    subtotal: number;
    confidence_score: number;
  }>;
  payment: {
    method?: string;           // e.g., "CARD", "CASH"
    subtotal: number;
    tax: number;               // GST in Australia (10%)
    total: number;
    confidence_score: number;
  };
  tax: {
    gst: number;               // 10% in Australia
    gst_inclusive: boolean;
    confidence_score: number;
  };
  overall_confidence: number;  // Average of all confidence scores
  metadata: {
    pages: number;
    extracted_at: string;      // ISO timestamp
  };
}
```

**receipts Table (extend existing):**

```sql
ALTER TABLE receipts ADD COLUMN IF NOT EXISTS category VARCHAR(50);
ALTER TABLE receipts ADD COLUMN IF NOT EXISTS status VARCHAR(20) DEFAULT 'unreconciled';
ALTER TABLE receipts ADD COLUMN IF NOT EXISTS reconciliation_match_id UUID REFERENCES reconciliation_matches(id);
```

**Category Merchant Mapping:**

```typescript
const CATEGORY_MAPPING: Record<string, string[]> = {
  'Groceries': ['woolworths', 'coles', 'aldi', 'iga'],
  'Fuel': ['bp', 'shell', 'caltex', '7-eleven', 'ampol'],
  'Supplies': ['bunnings', 'officeworks', 'kmart', 'big w'],
  'Telecommunications': ['telstra', 'optus', 'vodafone', 'tpg'],
  'Dining': ['mcdonalds', 'kfc', 'hungry jacks', 'subway', 'grill\'d'],
  'Pharmacy': ['chemist warehouse', 'priceline', 'terry white'],
  'Entertainment': ['event cinemas', 'hoyts', 'village'],
};
```

### Component Specifications

**Receipt Details Page:**

```tsx
// src/pages/ReceiptDetails.tsx
import { useEffect, useState } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Badge } from '@/components/ui/badge';
import { ArrowLeft, Save } from 'lucide-react';
import ConfidenceIndicator from '@/components/ConfidenceIndicator';
import { supabase } from '@/integrations/supabase/client';
import { useToast } from '@/hooks/use-toast';
import { inferCategory } from '@/utils/categoryInference';
import { formatCurrency } from '@/lib/utils';

interface ReceiptData {
  id: string;
  file_path: string;
  merchant: string;
  receipt_date: string;
  amount: number;
  tax: number;
  category?: string;
  status: string;
  confidence_score: number;
  ocr_data: any;
}

export default function ReceiptDetails() {
  const { id } = useParams<{ id: string }>();
  const navigate = useNavigate();
  const { toast } = useToast();
  const [receipt, setReceipt] = useState<ReceiptData | null>(null);
  const [imageUrl, setImageUrl] = useState<string>('');
  const [isEditing, setIsEditing] = useState(false);
  const [formData, setFormData] = useState({
    merchant: '',
    receipt_date: '',
    amount: 0,
    tax: 0,
    category: '',
  });

  useEffect(() => {
    fetchReceipt();
  }, [id]);

  const fetchReceipt = async () => {
    const { data, error } = await supabase
      .from('receipts')
      .select('*')
      .eq('id', id)
      .single();

    if (error) {
      toast({
        title: 'Error loading receipt',
        description: error.message,
        variant: 'destructive',
      });
      return;
    }

    setReceipt(data);
    setFormData({
      merchant: data.merchant || '',
      receipt_date: data.receipt_date || '',
      amount: data.amount || 0,
      tax: data.tax || 0,
      category: data.category || '',
    });

    // Generate signed URL for image
    const { data: signedUrlData } = await supabase.storage
      .from('receipts')
      .createSignedUrl(data.file_path, 3600);

    if (signedUrlData) {
      setImageUrl(signedUrlData.signedUrl);
    }
  };

  const handleSave = async () => {
    const { error } = await supabase
      .from('receipts')
      .update({
        merchant: formData.merchant,
        receipt_date: formData.receipt_date,
        amount: formData.amount,
        tax: formData.tax,
        category: formData.category,
      })
      .eq('id', id);

    if (error) {
      toast({
        title: 'Error saving changes',
        description: error.message,
        variant: 'destructive',
      });
      return;
    }

    toast({
      title: 'Changes saved',
      description: 'Receipt updated successfully.',
    });
    setIsEditing(false);
    fetchReceipt();
  };

  const handleApplyCategory = () => {
    const suggested = inferCategory(formData.merchant);
    if (suggested) {
      setFormData({ ...formData, category: suggested });
    }
  };

  if (!receipt) {
    return <div>Loading...</div>;
  }

  const suggestedCategory = inferCategory(receipt.merchant);
  const extraction: ReceiptExtraction = receipt.ocr_data;

  return (
    <div className="min-h-screen bg-cream p-8">
      <div className="max-w-6xl mx-auto">
        <Button
          variant="ghost"
          onClick={() => navigate('/receipts')}
          className="mb-4"
        >
          <ArrowLeft className="w-4 h-4 mr-2" />
          Back to Receipts
        </Button>

        <div className="grid md:grid-cols-2 gap-6">
          {/* Receipt Image */}
          <Card>
            <CardHeader>
              <CardTitle>Receipt Image</CardTitle>
            </CardHeader>
            <CardContent>
              {imageUrl && (
                <img
                  src={imageUrl}
                  alt="Receipt"
                  className="w-full rounded-lg border border-stone"
                />
              )}
            </CardContent>
          </Card>

          {/* Extracted Data */}
          <Card>
            <CardHeader>
              <div className="flex items-center justify-between">
                <CardTitle>Extracted Data</CardTitle>
                <ConfidenceIndicator score={receipt.confidence_score} />
              </div>
            </CardHeader>
            <CardContent className="space-y-4">
              {/* Merchant */}
              <div>
                <Label>Merchant</Label>
                <div className="flex items-center gap-2">
                  {isEditing ? (
                    <Input
                      value={formData.merchant}
                      onChange={(e) => setFormData({ ...formData, merchant: e.target.value })}
                    />
                  ) : (
                    <p className="text-charcoal font-medium">{receipt.merchant}</p>
                  )}
                  {extraction?.merchant?.confidence_score && (
                    <ConfidenceIndicator score={extraction.merchant.confidence_score} />
                  )}
                </div>
              </div>

              {/* Date */}
              <div>
                <Label>Date</Label>
                <div className="flex items-center gap-2">
                  {isEditing ? (
                    <Input
                      type="date"
                      value={formData.receipt_date}
                      onChange={(e) => setFormData({ ...formData, receipt_date: e.target.value })}
                    />
                  ) : (
                    <p className="text-charcoal">{new Date(receipt.receipt_date).toLocaleDateString('en-AU')}</p>
                  )}
                  {extraction?.transaction?.confidence_score && (
                    <ConfidenceIndicator score={extraction.transaction.confidence_score} />
                  )}
                </div>
              </div>

              {/* Amount */}
              <div>
                <Label>Total Amount</Label>
                <div className="flex items-center gap-2">
                  {isEditing ? (
                    <Input
                      type="number"
                      step="0.01"
                      value={formData.amount}
                      onChange={(e) => setFormData({ ...formData, amount: parseFloat(e.target.value) })}
                    />
                  ) : (
                    <p className="text-charcoal font-mono">{formatCurrency(receipt.amount)}</p>
                  )}
                  {extraction?.payment?.confidence_score && (
                    <ConfidenceIndicator score={extraction.payment.confidence_score} />
                  )}
                </div>
              </div>

              {/* Tax */}
              <div>
                <Label>Tax (GST)</Label>
                <div className="flex items-center gap-2">
                  {isEditing ? (
                    <Input
                      type="number"
                      step="0.01"
                      value={formData.tax}
                      onChange={(e) => setFormData({ ...formData, tax: parseFloat(e.target.value) })}
                    />
                  ) : (
                    <p className="text-charcoal font-mono">{formatCurrency(receipt.tax)}</p>
                  )}
                  {extraction?.tax?.confidence_score && (
                    <ConfidenceIndicator score={extraction.tax.confidence_score} />
                  )}
                </div>
              </div>

              {/* Category */}
              <div>
                <Label>Category</Label>
                <div className="flex items-center gap-2">
                  {isEditing ? (
                    <>
                      <Input
                        value={formData.category}
                        onChange={(e) => setFormData({ ...formData, category: e.target.value })}
                      />
                      {suggestedCategory && suggestedCategory !== formData.category && (
                        <Button size="sm" variant="outline" onClick={handleApplyCategory}>
                          Apply: {suggestedCategory}
                        </Button>
                      )}
                    </>
                  ) : (
                    <Badge>{receipt.category || 'Uncategorized'}</Badge>
                  )}
                </div>
              </div>

              {/* Actions */}
              <div className="flex gap-2 pt-4">
                {isEditing ? (
                  <>
                    <Button onClick={handleSave}>
                      <Save className="w-4 h-4 mr-2" />
                      Save Changes
                    </Button>
                    <Button variant="outline" onClick={() => setIsEditing(false)}>
                      Cancel
                    </Button>
                  </>
                ) : (
                  <Button onClick={() => setIsEditing(true)}>Edit</Button>
                )}
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Line Items */}
        {extraction?.line_items && extraction.line_items.length > 0 && (
          <Card className="mt-6">
            <CardHeader>
              <CardTitle>Line Items</CardTitle>
            </CardHeader>
            <CardContent>
              <table className="w-full">
                <thead>
                  <tr className="border-b">
                    <th className="text-left py-2">Description</th>
                    <th className="text-right py-2">Qty</th>
                    <th className="text-right py-2">Price</th>
                    <th className="text-right py-2">Subtotal</th>
                  </tr>
                </thead>
                <tbody>
                  {extraction.line_items.map((item, index) => (
                    <tr key={index} className="border-b">
                      <td className="py-2">{item.description}</td>
                      <td className="text-right">{item.quantity}</td>
                      <td className="text-right font-mono">{formatCurrency(item.unit_price)}</td>
                      <td className="text-right font-mono">{formatCurrency(item.subtotal)}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </CardContent>
          </Card>
        )}
      </div>
    </div>
  );
}
```

**Confidence Indicator Component:**

```tsx
// src/components/ConfidenceIndicator.tsx
import { CheckCircle, AlertTriangle, XCircle } from 'lucide-react';
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';

interface ConfidenceIndicatorProps {
  score: number; // 0.0 to 1.0
}

export default function ConfidenceIndicator({ score }: ConfidenceIndicatorProps) {
  const getIndicator = () => {
    if (score >= 0.90) {
      return {
        icon: CheckCircle,
        color: 'text-green-600',
        label: 'High confidence',
      };
    } else if (score >= 0.70) {
      return {
        icon: AlertTriangle,
        color: 'text-yellow-600',
        label: 'Medium confidence',
      };
    } else {
      return {
        icon: XCircle,
        color: 'text-red-600',
        label: 'Low confidence',
      };
    }
  };

  const { icon: Icon, color, label } = getIndicator();
  const percentage = Math.round(score * 100);

  return (
    <TooltipProvider>
      <Tooltip>
        <TooltipTrigger>
          <Icon className={`w-4 h-4 ${color}`} />
        </TooltipTrigger>
        <TooltipContent>
          <p>{label}: {percentage}%</p>
        </TooltipContent>
      </Tooltip>
    </TooltipProvider>
  );
}
```

**Category Inference Utility:**

```typescript
// src/utils/categoryInference.ts
const CATEGORY_MAPPING: Record<string, string[]> = {
  'Groceries': ['woolworths', 'coles', 'aldi', 'iga', 'foodworks'],
  'Fuel': ['bp', 'shell', 'caltex', '7-eleven', 'ampol', 'united'],
  'Supplies': ['bunnings', 'officeworks', 'kmart', 'big w', 'target'],
  'Telecommunications': ['telstra', 'optus', 'vodafone', 'tpg', 'iinet'],
  'Dining': ['mcdonalds', 'kfc', 'hungry jacks', 'subway', 'grilld', 'dominos'],
  'Pharmacy': ['chemist warehouse', 'priceline', 'terry white', 'amcal'],
  'Entertainment': ['event cinemas', 'hoyts', 'village', 'reading'],
  'Automotive': ['repco', 'supercheap auto', 'autobarn'],
  'Hardware': ['mitre 10', 'home timber'],
  'Electronics': ['jb hi-fi', 'harvey norman', 'the good guys'],
};

export function inferCategory(merchantName: string): string | null {
  if (!merchantName) return null;

  const normalizedMerchant = merchantName.toLowerCase().trim();

  for (const [category, keywords] of Object.entries(CATEGORY_MAPPING)) {
    for (const keyword of keywords) {
      if (normalizedMerchant.includes(keyword)) {
        return category;
      }
    }
  }

  return null;
}
```

### File Locations

**New Files to Create:**
- `src/pages/ReceiptDetails.tsx` - Receipt details page
- `src/pages/Receipts.tsx` - Receipt library view
- `src/components/ConfidenceIndicator.tsx` - Confidence score indicator
- `src/utils/categoryInference.ts` - Category inference logic

**Database Migration:**
- Add `category` and `status` columns to `receipts` table

**Existing Files to Reference:**
- `src/integrations/supabase/client.ts` - Database and storage client
- `src/lib/utils.ts` - formatCurrency utility

### Technical Constraints

**Image Display:**
- Use signed URLs from Supabase Storage (1-hour expiry)
- Support PDF preview (iframe or PDF.js library)
- Thumbnail generation optional (use full image for now)

**Confidence Thresholds:**
- High: ≥0.90 (green checkmark)
- Medium: 0.70-0.89 (yellow warning)
- Low: <0.70 (red alert)
- Overall confidence: average of all field confidence scores

**Category Inference:**
- Fuzzy matching with lowercase contains check
- First match wins (order matters in mapping)
- User can override suggestion

**Date Formatting:**
- Store as ISO format in database
- Display as DD/MM/YYYY (Australian format)
- Date picker accepts YYYY-MM-DD (HTML input type="date")

### Testing Requirements

**Unit Tests:**
- ReceiptExtraction parsing from n8n callback
- Confidence indicator color mapping
- Category inference (known merchants, unknown merchants)
- Date formatting (ISO → DD/MM/YYYY)

**Integration Tests:**
- Fetch receipt details from database
- Generate signed URL for receipt image
- Update receipt fields (merchant, date, amount, category)
- Apply suggested category

**E2E Tests:**
- Upload receipt → processing completes → view details
- Edit receipt field → save → verify updated
- Apply suggested category → verify saved
- Filter receipts by date range, merchant, status

### Security Considerations

- RLS policies ensure users only access their own receipts
- Signed URLs expire after 1 hour (regenerate on page refresh)
- Input validation: positive amounts, valid date format, tax ≤ total
- Category inference is client-side (no security risk)

## Change Log

| Date       | Version | Description                    | Author |
|------------|---------|--------------------------------|--------|
| 2025-10-11 | 1.0     | Initial story draft (from PO) | Sarah  |

## Dev Agent Record

### Agent Model Used
<!-- Dev agent will update this section -->

### Debug Log References
<!-- Dev agent will log commands, test results, lint fixes here -->

### Completion Notes
<!-- Dev agent will document what was implemented, challenges, deviations -->

### File List
<!-- Dev agent will list all files created/modified/deleted -->

## QA Results
<!-- QA agent will append review results here -->
