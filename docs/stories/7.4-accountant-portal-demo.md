# Story 7.4: Accountant Portal Demo Screen

## Status: Planned
## Story

As a **demo viewer evaluating Previa's MVP**,
I want **a viewing-only accountant portal that shows collaboration features for tax professionals**,
So that **I can understand how users will share financial data with their accountants**.

## Acceptance Criteria

**AC1: Demo Mode Banner**
- Display prominent banner at top: "ü§ù Accountant Portal - Coming Q3 2026"
- Banner styled with purple gradient background
- Clear text: "Share financial data securely with your tax professional."
- Dismissible (X button in corner)

**AC2: Share Access Interface**
- Card titled "Grant Accountant Access"
- Form fields:
  - Accountant Name (text input) - Placeholder: "Jane Smith, CPA"
  - Accountant Email (email input) - Placeholder: "jane@smithaccounting.com.au"
  - Access Level (dropdown):
    - üîç **View Only** (default)
    - üì§ **View & Export**
    - ‚úèÔ∏è **View, Export & Annotate**
  - Access Duration (dropdown):
    - 1 Month
    - 3 Months
    - 6 Months
    - 1 Year (default)
    - Permanent (until revoked)
  - Data Scope (multi-select checkboxes):
    - ‚òëÔ∏è Transactions (all)
    - ‚òëÔ∏è Receipts (all)
    - ‚òëÔ∏è Bank Statements
    - ‚òëÔ∏è Reconciliation Matches
    - ‚òëÔ∏è Financial Reports (P&L, Balance Sheet)
    - ‚òê Tax Documents (future feature)
- "Send Invitation" button (primary, disabled)
- Tooltip on button: "Demo mode - Share access will be available in Q3 2026"

**AC3: Active Accountants List**
- Card titled "Shared Access"
- Table showing 2 sample accountants:
  | Name | Email | Access Level | Expires | Last Active | Actions |
  |------|-------|--------------|---------|-------------|---------|
  | Jane Smith, CPA | jane@smithaccounting.com.au | View & Export | 2026-12-31 | 2 days ago | Revoke |
  | Michael Chen, CA | michael@chenaccountants.com.au | View Only | 2026-06-30 | 1 week ago | Revoke |
- "Revoke" button styled as danger (red), disabled with tooltip
- "Last Active" shows relative time (2 days ago, 1 week ago)
- Badge showing access level (color-coded: blue for View Only, green for View & Export, purple for View, Export & Annotate)

**AC4: Activity Log**
- Card titled "Accountant Activity"
- Table showing 10 recent actions by accountants:
  | Date | Accountant | Action | Details |
  |------|------------|--------|---------|
  | 2025-10-26 | Jane Smith | Exported Data | CSV export (Jan-Oct 2025, 345 transactions) |
  | 2025-10-25 | Jane Smith | Viewed Receipts | 23 receipts (Groceries, Dining) |
  | 2025-10-23 | Jane Smith | Added Annotation | "Consider claiming home office deduction" (Transaction #1234) |
  | 2025-10-20 | Michael Chen | Viewed Dashboard | Financial overview, widgets |
  | 2025-10-18 | Jane Smith | Generated Report | Profit & Loss (YTD) |
  | 2025-10-15 | Jane Smith | Exported Data | JSON export (All data) |
  | 2025-10-12 | Michael Chen | Viewed Transactions | Filtered by "Utilities" category |
  | 2025-10-10 | Jane Smith | Added Annotation | "GST calculation error on receipt #567" |
  | 2025-10-08 | Michael Chen | Viewed Receipts | 8 receipts (Fuel, Transport) |
  | 2025-10-05 | Jane Smith | Viewed Dashboard | Financial overview |
- Each row shows: Date (DD/MM/YYYY), Accountant name, Action type (badge), Details (grey text)
- Filter dropdown: "All Actions" / "Exports" / "Views" / "Annotations"
- Pagination: 10 per page, showing "Page 1 of 3 (28 total activities)"

**AC5: Annotation System Preview**
- Card titled "Accountant Annotations"
- Sample annotations on transactions:
  1. **Transaction: Woolworths** - $127.45 (15/10/2025)
     - üìù Annotation by Jane Smith (2 days ago):
       - "This receipt qualifies for home office deduction (groceries for client meeting). Claim 50% = $63.73."
     - Reply button (disabled, tooltip: "Available in full version")
  2. **Transaction: Bunnings** - $156.78 (10/10/2025)
     - üìù Annotation by Jane Smith (1 week ago):
       - "Business expense for office setup. Claim full amount $156.78. Keep receipt for 5 years (ATO requirement)."
  3. **Transaction: BP Fuel** - $65.00 (08/10/2025)
     - üìù Annotation by Michael Chen (2 weeks ago):
       - "Claim 66 cents per km (ATO 2025 rate). Log distance (estimated 98 km)."
- Each annotation: Icon, accountant name, timestamp, annotation text
- User reply box (disabled): "Your reply..." with tooltip

**AC6: Report Generation Interface**
- Card titled "Generate Reports for Accountant"
- Report types (radio buttons):
  - ‚óã Profit & Loss Statement (P&L)
  - ‚óã Balance Sheet
  - ‚óã Cash Flow Statement
  - ‚óè Tax Summary (selected)
  - ‚óã GST Report (BAS)
- Date range selector:
  - Financial Year: FY 2024-25 (01/07/2024 - 30/06/2025)
  - Calendar Year: 2024 (01/01/2024 - 31/12/2024)
  - Custom Range: (date pickers)
- Format dropdown: PDF / Excel / CSV
- "Generate Report" button (primary, disabled)
- Preview pane showing sample Tax Summary:
  - **Total Income:** $65,000
  - **Total Deductions:** $12,500
  - **Taxable Income:** $52,500
  - **Estimated Tax:** $9,147
  - **Refund/Owed:** $1,250 (refund)
  - Breakdown by category (table)

**AC7: Permission Controls**
- Card titled "Data Privacy Settings"
- Toggle switches (all enabled by default):
  - ‚úÖ Allow accountants to view personal details (name, email, DOB)
  - ‚úÖ Allow accountants to view bank account numbers
  - ‚úÖ Allow accountants to export data
  - ‚úÖ Allow accountants to add annotations
  - ‚úÖ Notify me when accountant accesses my data (email notification)
  - ‚ùå Allow accountants to edit transactions (disabled, tooltip: "Not available for security")
- Each toggle: Label, description, status indicator (green/red)
- All toggles disabled in demo with tooltip: "Demo mode - Settings will be available in Q3 2026"

**AC8: Pricing & Plan Comparison**
- Card titled "Accountant Portal Pricing"
- Table comparing plans:
  | Feature | Free Tier | Premium Tier | Business Tier |
  |---------|-----------|--------------|---------------|
  | Accountant Access | ‚ùå Not Available | ‚úÖ 1 Accountant | ‚úÖ 3 Accountants |
  | Data Export | ‚ùå CSV Only | ‚úÖ CSV, JSON, Excel | ‚úÖ CSV, JSON, Excel, PDF |
  | Annotations | ‚ùå No | ‚úÖ Yes | ‚úÖ Yes |
  | Activity Log | ‚ùå 7 Days | ‚úÖ 90 Days | ‚úÖ Unlimited |
  | Reports | ‚ùå Basic | ‚úÖ Standard | ‚úÖ Advanced |
  | Priority Support | ‚ùå No | ‚ùå No | ‚úÖ Yes |
  | **Price** | **Free** | **$9.99/month** | **$29.99/month** |
- "Upgrade to Premium" button (primary, disabled)
- Current plan badge: "Free Tier" (grey)

## Tasks / Subtasks

- [ ] **Task 1: Demo Page Setup** (AC: 1)
  - [ ] 1.1: Create `src/pages/demo/AccountantPortalDemo.tsx`
  - [ ] 1.2: Add route `/dashboard/demo/accountant-portal` in router
  - [ ] 1.3: Reuse DemoBanner component from Story 7.1
  - [ ] 1.4: Add to sidebar navigation (under "Demo Features")

- [ ] **Task 2: Share Access Interface** (AC: 2)
  - [ ] 2.1: Create ShareAccessForm component
  - [ ] 2.2: Chakra UI Input fields (name, email)
  - [ ] 2.3: Dropdown for access level (3 options)
  - [ ] 2.4: Dropdown for access duration (5 options)
  - [ ] 2.5: Multi-select checkboxes for data scope (6 options)
  - [ ] 2.6: Disabled "Send Invitation" button with tooltip

- [ ] **Task 3: Active Accountants Table** (AC: 3)
  - [ ] 3.1: Create ActiveAccountantsTable component
  - [ ] 3.2: Chakra UI Table with 6 columns
  - [ ] 3.3: Sample data for 2 accountants
  - [ ] 3.4: Access level badges (color-coded)
  - [ ] 3.5: Relative time display (2 days ago, 1 week ago)
  - [ ] 3.6: Disabled "Revoke" button with tooltip

- [ ] **Task 4: Activity Log** (AC: 4)
  - [ ] 4.1: Create ActivityLogTable component
  - [ ] 4.2: Sample data for 10 accountant actions
  - [ ] 4.3: Action type badges (Exported, Viewed, Annotated)
  - [ ] 4.4: Filter dropdown (All / Exports / Views / Annotations)
  - [ ] 4.5: Pagination (10 per page, 3 pages total)
  - [ ] 4.6: Responsive table (stack on mobile)

- [ ] **Task 5: Annotation System** (AC: 5)
  - [ ] 5.1: Create AnnotationCard component
  - [ ] 5.2: Sample annotations for 3 transactions
  - [ ] 5.3: Display accountant name, timestamp, annotation text
  - [ ] 5.4: Disabled reply button with tooltip
  - [ ] 5.5: Link to original transaction (click to view)

- [ ] **Task 6: Report Generation** (AC: 6)
  - [ ] 6.1: Create ReportGenerationInterface component
  - [ ] 6.2: Radio buttons for 5 report types
  - [ ] 6.3: Date range selector (FY, Calendar Year, Custom)
  - [ ] 6.4: Format dropdown (PDF, Excel, CSV)
  - [ ] 6.5: Disabled "Generate Report" button
  - [ ] 6.6: Sample Tax Summary preview pane
  - [ ] 6.7: Mock tax calculation (income, deductions, taxable income)

- [ ] **Task 7: Permission Controls** (AC: 7)
  - [ ] 7.1: Create PermissionControlsCard component
  - [ ] 7.2: Chakra UI Switch toggles (6 permissions)
  - [ ] 7.3: Labels and descriptions
  - [ ] 7.4: Disabled toggles with tooltip (demo mode)
  - [ ] 7.5: Status indicators (green enabled, red disabled)

- [ ] **Task 8: Pricing Comparison** (AC: 8)
  - [ ] 8.1: Create PricingTable component
  - [ ] 8.2: Chakra UI Table with 7 features across 3 tiers
  - [ ] 8.3: Checkmark/X icons for availability
  - [ ] 8.4: Current plan badge (Free Tier)
  - [ ] 8.5: Disabled "Upgrade to Premium" button

- [ ] **Task 9: Mock Data**
  - [ ] 9.1: Create `src/test/fixtures/accountant-portal-mock-data.ts`
  - [ ] 9.2: Generate 2 sample accountants
  - [ ] 9.3: Generate 28 activity log entries (3 pages)
  - [ ] 9.4: Generate 3 sample annotations
  - [ ] 9.5: Generate sample tax summary data

## Technical Implementation

**File Structure:**
```
src/
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îî‚îÄ‚îÄ demo/
‚îÇ       ‚îú‚îÄ‚îÄ AccountantPortalDemo.tsx  # Main page
‚îÇ       ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ demo/
‚îÇ       ‚îú‚îÄ‚îÄ DemoBanner.tsx            # Reusable from 7.1
‚îÇ       ‚îú‚îÄ‚îÄ ShareAccessForm.tsx       # Invite accountant
‚îÇ       ‚îú‚îÄ‚îÄ ActiveAccountantsTable.tsx # Shared access list
‚îÇ       ‚îú‚îÄ‚îÄ ActivityLogTable.tsx      # Accountant actions
‚îÇ       ‚îú‚îÄ‚îÄ AnnotationCard.tsx        # Accountant annotations
‚îÇ       ‚îú‚îÄ‚îÄ ReportGenerationInterface.tsx # Report generator
‚îÇ       ‚îú‚îÄ‚îÄ PermissionControlsCard.tsx # Privacy settings
‚îÇ       ‚îî‚îÄ‚îÄ PricingTable.tsx          # Plan comparison
‚îî‚îÄ‚îÄ test/
    ‚îî‚îÄ‚îÄ fixtures/
        ‚îî‚îÄ‚îÄ accountant-portal-mock-data.ts # Mock data
```

**Dependencies:**
- Chakra UI (existing): Table, Input, Select, Switch, Button, Badge
- date-fns (existing): Relative time formatting
- React: useState for form state management

**Styling:**
- Access level badges:
  - View Only: Blue (#3B82F6)
  - View & Export: Green (#10B981)
  - View, Export & Annotate: Purple (#8B5CF6)
- Action type badges:
  - Exported: Orange (#F59E0B)
  - Viewed: Blue (#3B82F6)
  - Annotated: Purple (#8B5CF6)

## Acceptance Testing

**Scenario 1: View Accountant Portal**
- Given: User navigates to `/dashboard/demo/accountant-portal`
- When: Page loads
- Then: Demo banner visible, all 8 sections render correctly

**Scenario 2: Try Share Access**
- Given: User is on Accountant Portal Demo page
- When: User fills form and clicks "Send Invitation"
- Then: Toast notification: "Demo mode - Share access will be available in Q3 2026"

**Scenario 3: View Activity Log**
- Given: User scrolls to Activity Log table
- When: User views table
- Then: 10 recent accountant actions displayed with details

**Scenario 4: Filter Activities**
- Given: User is viewing Activity Log
- When: User selects "Exports" from filter dropdown
- Then: Table filters to show only export actions (3 entries)

**Scenario 5: View Annotation**
- Given: User scrolls to Annotations section
- When: User views annotation on Woolworths transaction
- Then: Annotation by Jane Smith displayed with tax deduction advice

**Scenario 6: Try Generate Report**
- Given: User selects "Tax Summary" report type
- When: User clicks "Generate Report" button
- Then: Button is disabled, tooltip shows "Demo mode"

**Scenario 7: Toggle Permissions**
- Given: User scrolls to Permission Controls
- When: User tries to toggle "Allow accountants to export data"
- Then: Toggle is disabled, tooltip shows "Demo mode - Settings will be available in Q3 2026"

**Scenario 8: View Pricing**
- Given: User scrolls to Pricing table
- When: User views plan comparison
- Then: Free/Premium/Business tiers displayed, current plan badge shows "Free Tier"

## User Impact

**For Demo Viewers:**
- Understand accountant collaboration features
- See data sharing and permission controls
- View activity logging and audit trail
- Learn about annotation system for tax professionals
- See report generation capabilities

**For Development Team:**
- Define accountant portal requirements
- Identify permission levels and data scopes
- Plan activity logging system
- Provide basis for Epic 11 (Accountant Portal implementation - Q3 2026)

## Related Stories

- **Epic 11: Accountant Portal** - Real implementation (Q3 2026)
- **Story 7.1: Data Export Demo** - Related export functionality
- **Story 7.2: Advanced Analytics Demo** - Related reporting features

## Estimated Effort

- **Design:** 1 day
- **Development:** 4-5 days
- **Testing:** 1 day
- **Total:** 6-7 days

## Notes

- This is a **viewing-only demo screen** for MVP submission
- All functionality disabled (no backend required)
- Mock accountant data (2 sample accountants)
- Demonstrates collaboration features for FIT3195 Assessment 3
- Real implementation (Epic 11) scheduled for Q3 2026
- Australian context: ATO tax rates, GST, BAS reporting
- Privacy-first: User controls all permissions
- Audit trail: All accountant actions logged for compliance
